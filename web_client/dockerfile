# Oil Database Web Client Docker configuration
#
#FROM registry.orr.noaa.gov/erd/centos-conda/centos7-python3.9
FROM node:18

# first of all let's see what we have in our base image
RUN node --version
RUN npm --version

COPY ./web_client/ /web_client/
COPY ./oildb-deploy/config/stage/web_client/ /web_client/public/configs/

RUN npm install npm@latest -g
RUN node --version
RUN npm --version

# ember-cli should already be in our package.json, but we want to install it globally.
RUN npm install ember-cli -g
RUN ember --version
RUN node --version
RUN npm --version

RUN cd /web_client && npm install

EXPOSE 4200
ENTRYPOINT ["/web_client/docker_start.sh"]
